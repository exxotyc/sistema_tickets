{% extends "tickets/base.html" %}
{% load static %}

{% block title %}Inicio · Coyahue Tickets{% endblock %}

{% block extra_head %}
<style>
:root {
  --primary-blue: #3b82f6;        /* Azul medio principal */
  --primary-dark: #1e40af;        /* Azul medio oscuro */
  --primary-light: #60a5fa;       /* Azul medio claro */
  --accent-color: #7dd3fc;        /* Azul claro para acentos */
  --bg-dark: #0f172a;             /* Fondo oscuro */
  --bg-card: rgba(255, 255, 255, 0.95);
  --text-primary: #1e293b;
  --text-muted: #475569;
  --text-light: #f8fafc;
  --glass: rgba(255, 255, 255, 0.15);
  --glass-border: rgba(255, 255, 255, 0.2);
}

/* === Layout general === */
.container-narrow {
  max-width: 1200px;
  margin-left: auto;
  margin-right: auto;
}

/* === Hero Section - Completamente renovada === */
.hero {
  position: relative;
  overflow: hidden;
  border-radius: 2rem;
  margin: 2rem 0;
  padding: 4rem 0;
  background: linear-gradient(135deg, var(--primary-blue) 0%, var(--primary-dark) 100%);
  color: rgb(0, 11, 58);
  box-shadow: 0 20px 40px rgb(0, 32, 83);
}

.hero::before {
  content: "";
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: 
    radial-gradient(circle at 20% 80%, rgba(125, 211, 252, 0.15) 0%, transparent 50%),
    radial-gradient(circle at 80% 20%, rgba(96, 165, 250, 0.1) 0%, transparent 50%);
  z-index: 1;
}

.hero-content {
  position: relative;
  z-index: 2;
}

.hero h1 {
  font-size: 3.5rem;
  font-weight: 800;
  margin-bottom: 1.5rem;
  line-height: 1.1;
  text-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
}

.hero .lead-text {
  font-size: 1.35rem;
  font-weight: 400;
  margin-bottom: 2.5rem;
  line-height: 1.6;
  opacity: 0.9;
}

/* === Badges === */
.hero .badge {
  font-weight: 600;
  letter-spacing: 0.5px;
  padding: 0.5rem 1rem;
  backdrop-filter: blur(10px);
  background: var(--glass);
  border: 1px solid var(--glass-border);
}

/* === Feature Card en Hero - Estilo Glass === */
.feature-card-glass {
  background: var(--glass);
  backdrop-filter: blur(10px);
  border: 1px solid var(--glass-border);
  border-radius: 1.5rem;
  padding: 2rem;
  color: rgb(0, 0, 0);
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
}

/* === KPI Section - Rediseñada === */
.kpi-section {
  margin: 4rem 0;
}

.kpi {
  display: flex;
  align-items: center;
  gap: 1.5rem;
  padding: 1.5rem;
  background: white;
  border-radius: 1.5rem;
  border: 1px solid rgba(0, 0, 0, 0.05);
  margin-bottom: 1rem;
  transition: all 0.3s ease;
  box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
}
.kpi:hover {
  transform: translateY(-5px);
  box-shadow: 0 15px 30px rgba(59, 130, 246, 0.15);
}
.kpi-title {
  font-weight: 700;
  color: var(--text-primary);
  margin-bottom: 0.25rem;
  font-size: 1.1rem;
}
.kpi-description {
  color: var(--text-muted);
  font-size: 0.9rem;
  line-height: 1.4;
}

.ring {
  position: relative;
  width: 70px;
  height: 70px;
  border-radius: 50%;
  background: conic-gradient(var(--primary-blue) calc(var(--p, 0) * 360deg), #e2e8f0 0deg);
  display: flex;
  align-items: center;
  justify-content: center;
  box-shadow: 0 4px 15px rgba(59, 130, 246, 0.25);
}
.ring::before {
  content: "";
  position: absolute;
  width: 56px;
  height: 56px;
  border-radius: 50%;
  background: white;
}
.ring span {
  position: relative;
  font-size: 0.85rem;
  font-weight: 700;
  color: var(--text-primary);
}

/* === Tarjetas principales === */
.card-modern {
  background: white;
  border-radius: 1.5rem;
  border: none;
  box-shadow: 0 10px 30px rgba(0, 0, 0, 0.08);
  transition: transform 0.3s ease, box-shadow 0.3s ease;
  overflow: hidden;
}
.card-modern:hover {
  transform: translateY(-8px);
  box-shadow: 0 20px 40px rgba(59, 130, 246, 0.15);
}

.card-modern .card-body {
  padding: 2rem;
}

.card-modern .card-title {
  color: var(--text-primary);
  font-weight: 700;
  margin-bottom: 1rem;
}

.card-modern .card-text {
  color: var(--text-muted);
  margin-bottom: 1.5rem;
}

/* === Botones mejorados === */
.btn {
  font-weight: 600;
  transition: all 0.3s ease;
  padding: 0.75rem 1.5rem;
  border-radius: 0.75rem;
  position: relative;
  overflow: hidden;
}

.btn-primary {
  background: linear-gradient(135deg, var(--primary-blue), var(--primary-dark));
  color: white;
  border: none;
  box-shadow: 0 4px 15px rgba(59, 130, 246, 0.3);
}
.btn-primary:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 25px rgba(59, 130, 246, 0.4);
}

.btn-outline-primary {
  color: var(--primary-blue);
  border: 2px solid var(--primary-blue);
  background: transparent;
}
.btn-outline-primary:hover {
  background: var(--primary-blue);
  color: white;
  transform: translateY(-2px);
  box-shadow: 0 8px 20px rgba(59, 130, 246, 0.3);
}

/* === Sección de visualización === */
.viz-section {
  position: relative;
  border-radius: 2rem;
  overflow: hidden;
  padding: 4rem 0;
  margin: 4rem 0;
  background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);
  border: 1px solid rgba(0, 0, 0, 0.05);
}

.viz-title {
  font-weight: 800;
  color: var(--text-primary);
  margin-bottom: 1rem;
}

.viz-description {
  color: var(--text-muted);
  margin-bottom: 2rem;
}

/* === Mejoras de texto === */
.text-muted { color: var(--text-muted) !important; }
.text-light { color: var(--text-light) !important; }

/* === Responsive === */
@media (max-width: 768px) {
  .hero { 
    padding: 3rem 1rem; 
    margin: 1rem 0; 
    border-radius: 1.5rem;
  }
  .hero h1 { 
    font-size: 2.5rem; 
  }
  .hero .lead-text {
    font-size: 1.1rem;
  }
}
</style>
{% endblock %}

{% block content %}
<div class="container-narrow mx-auto">

  <!-- HERO MEJORADA -->
  <section class="hero p-4 p-md-5">
    <div class="hero-content">
      <div class="row g-4 align-items-center">
        <div class="col-lg-7">
          <div class="d-flex align-items-center gap-2 mb-3">
            <span class="badge rounded-pill">
              <i class="bi bi-lightning-charge-fill me-1"></i>Nuevo
            </span>
            <span class="badge rounded-pill">Coyahue</span>
          </div>
          <h1 class="fw-bold mb-3">Sistema de Tickets Coyahue</h1>
          <p class="lead-text">Gestiona y resuelve solicitudes con nuestra plataforma intuitiva y eficiente, diseñada para optimizar tu flujo de trabajo.</p>

          <div class="d-flex flex-wrap gap-2">
            {% if request.user.is_authenticated %}
              <a href="{% url 'dashboard' %}" class="btn btn-primary btn-ripple">
                <i class="bi bi-speedometer2 me-1"></i> Ir al Dashboard
              </a>
              <a href="{% url 'ticket_list' %}" class="btn btn-outline-primary btn-ripple">
                <i class="bi bi-list-check me-1"></i> Ver Tickets
              </a>
            {% else %}
              <a href="{% url 'login' %}" class="btn btn-primary btn-ripple">
                <i class="bi bi-person-check me-1"></i> Iniciar Sesión
              </a>
            {% endif %}
          </div>
        </div>

        <div class="col-lg-5">
          <div class="feature-card-glass">
            <div class="d-flex align-items-center gap-3 mb-3">
              <i class="bi bi-shield-lock-fill fs-1"></i>
              <div>
                <strong>Seguridad Avanzada</strong>
                <p class="m-0 small opacity-75">Sesiones protegidas y rutas privadas para garantizar la confidencialidad.</p>
              </div>
            </div>
            <hr class="my-3 opacity-25">
            <div class="d-flex align-items-center gap-3">
              <i class="bi bi-rocket-takeoff-fill fs-1"></i>
              <div>
                <strong>Máxima Eficiencia</strong>
                <p class="m-0 small opacity-75">Flujo optimizado para registrar y resolver incidencias rápidamente.</p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- TARJETAS PRINCIPALES -->
  <div class="row g-4 mt-4">
    <div class="col-md-6">
      <div class="card card-modern h-100">
        <div class="card-body">
          <div class="d-flex align-items-center gap-2 mb-3">
            <i class="bi bi-box-arrow-in-right text-primary fs-4"></i>
            <h5 class="card-title m-0 fw-bold">Acceso Seguro</h5>
          </div>
          <p class="card-text">Autentícate de forma segura para acceder a todas las funcionalidades del sistema de tickets.</p>
          {% if request.user.is_authenticated %}
            <a href="{% url 'dashboard' %}" class="btn btn-primary btn-ripple">Ir al Dashboard</a>
          {% else %}
            <a href="{% url 'login' %}" class="btn btn-primary btn-ripple">Iniciar Sesión</a>
          {% endif %}
        </div>
      </div>
    </div>

    <div class="col-md-6">
      <div class="card card-modern h-100">
        <div class="card-body">
          <div class="d-flex align-items-center gap-2 mb-3">
            <i class="bi bi-journal-check text-primary fs-4"></i>
            <h5 class="card-title m-0 fw-bold">Gestión de Tickets</h5>
          </div>
          <p class="card-text">Consulta el listado completo, filtra por estado y gestiona todas tus solicitudes en un solo lugar.</p>
          {% if request.user.is_authenticated %}
            <a href="{% url 'ticket_list' %}" class="btn btn-outline-primary btn-ripple">Ver Listado</a>
          {% else %}
            <a href="{% url 'login' %}" class="btn btn-outline-primary btn-ripple">Acceder para Ver</a>
          {% endif %}
        </div>
      </div>
    </div>
  </div>

  <!-- MÉTRICAS MEJORADAS -->
  <section class="kpi-section">
    <div class="viz-section p-4 p-md-5">
      <div class="row g-4 align-items-center">
        <div class="col-lg-6">
          <h3 class="viz-title">Métricas de Desempeño</h3>
          <p class="viz-description">Seguimiento en tiempo real del rendimiento y eficiencia del sistema de tickets.</p>

          <div class="d-flex flex-column gap-3">
            <div class="kpi">
              <div class="ring" style="--p:.78"><span>78%</span></div>
              <div>
                <div class="kpi-title">Resolución en Primer Contacto</div>
                <div class="kpi-description">Tickets resueltos sin necesidad de escalamiento</div>
              </div>
            </div>
            <div class="kpi">
              <div class="ring" style="--p:.62"><span>62%</span></div>
              <div>
                <div class="kpi-title">SLA Dentro de Tiempo</div>
                <div class="kpi-description">Cumplimiento de acuerdos de nivel de servicio</div>
              </div>
            </div>
            <div class="kpi">
              <div class="ring" style="--p:.91"><span>91%</span></div>
              <div>
                <div class="kpi-title">Satisfacción del Usuario</div>
                <div class="kpi-description">Calificación promedio de los usuarios</div>
              </div>
            </div>
          </div>

          <div class="d-flex gap-2 mt-4">
            {% if request.user.is_authenticated %}
              <a href="{% url 'dashboard' %}" class="btn btn-primary btn-ripple">
                <i class="bi bi-graph-up-arrow me-1"></i> Ver Métricas Completas
              </a>
              <a href="{% url 'ticket_list' %}" class="btn btn-outline-primary btn-ripple">
                <i class="bi bi-list-ul me-1"></i> Ver Todos los Tickets
              </a>
            {% else %}
              <a href="{% url 'login' %}" class="btn btn-primary btn-ripple">
                <i class="bi bi-lock me-1"></i> Iniciar Sesión para Ver Métricas
              </a>
            {% endif %}
          </div>
        </div>

        <div class="col-lg-6">
          <div class="card card-modern">
            <div class="card-body p-3">
              <svg viewBox="0 0 560 260" width="100%" height="100%">
                <defs>
                  <linearGradient id="g1" x1="0" y1="0" x2="1" y2="0">
                    <stop offset="0%" stop-color="#3b82f6"/>
                    <stop offset="100%" stop-color="#1e40af"/>
                  </linearGradient>
                  <filter id="glow" x="-50%" y="-50%" width="200%" height="200%">
                    <feGaussianBlur stdDeviation="6" result="blur"/>
                    <feMerge>
                      <feMergeNode in="blur"/><feMergeNode in="SourceGraphic"/>
                    </feMerge>
                  </filter>
                </defs>
                <path d="M20 210 C120 120, 220 180, 300 110 S520 80, 540 160"
                      fill="none" stroke="url(#g1)" stroke-width="6" filter="url(#glow)"/>
              </svg>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

</div>
{% endblock %}